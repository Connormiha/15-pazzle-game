(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(t,e,n){t.exports={app:"app_app__2bOu3",app__field:"app_app__field__3J5SI"}},23:function(t,e,n){t.exports={field:"field_field__2e5J0"}},24:function(t,e,n){t.exports={"field-item":"field-item_field-item__k-jgj","field-item_empty":"field-item_field-item_empty__pNdk1"}},25:function(t,e,n){t.exports={controls:"controls_controls__3HuPR",controls__label:"controls_controls__label__2rx-9",controls__form:"controls_controls__form__2pyWq",controls__count:"controls_controls__count__5NdmP"}},26:function(t,e,n){t.exports={button:"button_button__3ZrMc",button_size_small:"button_button_size_small__2szLC",button_size_medium:"button_button_size_medium__1FngU",button_size_large:"button_button_size_large__1XCe6"}},27:function(t,e,n){t.exports={"text-input":"text-input_text-input__1Ippd","text-input__input":"text-input_text-input__input__2n4O8","text-input__input_invalid":"text-input_text-input__input_invalid__2GIIF","text-input__input_size_small":"text-input_text-input__input_size_small__3GWzP","text-input__input_size_medium":"text-input_text-input__input_size_medium__2ChTl","text-input__input_size_large":"text-input_text-input__input_size_large__KK1-e"}},29:function(t,e,n){t.exports=n(39)},34:function(t,e,n){},39:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n.n(i),o=n(20),r=n.n(o),s=(n(34),n(2)),c=n(3),u=n(5),l=n(4),_=n(6),p=n(21),m=n.n(p),d=n(14),h={game:{state:"not-started"},field:{history:[],position:[]}},f=function(t){for(var e=[],n=t*t,i=0;i<n;i++)e.push(i);return b(e),e},b=function(t){for(var e=t.length-1;e>0;e--){var n=Math.random()*(e+1)|0,i=[t[n],t[e]];t[e]=i[0],t[n]=i[1]}},v=function(t,e){var n=t.indexOf(e),i=y(t,n),a=t.slice(),o=[a[i],a[n]];return a[n]=o[0],a[i]=o[1],a},y=function(t,e){var n=Math.sqrt(t.length),i=e/n|0,a=e%n;return a>0&&0===t[e-1]?e-1:a<n-1&&0===t[e+1]?e+1:i>0&&0===t[e-n]?e-n:i<n-1&&0===t[e+n]?e+n:e},O=function(t){return{type:"FIELD_GENERATE",size:t}},E=n(23),g=n.n(E),j=n(24),z=n.n(j),k=n(1),x=n.n(k),C=x()(z.a),S=function(t){function e(){var t,n;Object(s.a)(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(a))))._handleClick=function(){n.props.onClick(n.props.id)},n}return Object(_.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return a.a.createElement("button",{className:C({empty:0===this.props.id}),disabled:this.props.isDisabled,onClick:this._handleClick},this.props.id)}}]),e}(a.a.PureComponent),M=x()(g.a),w=function(t){function e(){return Object(s.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(_.a)(e,t),Object(c.a)(e,[{key:"_renderItems",value:function(){var t=this.props,e=t.field,n=t.onMove,i=Math.sqrt(e.length);return e.map(function(t,o){return a.a.createElement(a.a.Fragment,{key:t},a.a.createElement(S,{id:t,isDisabled:(r=e,s=o,!(s!==y(r,s))),onClick:n}),(o+1)%i===0&&a.a.createElement("div",null));var r,s})}},{key:"render",value:function(){return a.a.createElement("article",{className:M()},this._renderItems())}}]),e}(a.a.PureComponent),A=n(25),I=n.n(A),N=n(13),F=n(26),D=n.n(F),G=x()(D.a),B=function(t){function e(){return Object(s.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(_.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this.props,e=t.size,n=t.children,i=Object(N.a)(t,["size","children"]);return a.a.createElement("button",Object.assign({},i,{className:G({size:e})}),n)}}]),e}(a.a.PureComponent),W=n(27),L=n.n(W),T=x()(L.a);function V(t){var e=t.size,n=t.invalid,i=Object(N.a)(t,["size","invalid"]);return a.a.createElement("div",{className:T()},a.a.createElement("input",Object.assign({className:T("input",{size:e,invalid:n})},i)))}var P=x()(I.a),R=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,t)))._handleChangeSize=function(t){n.setState({fieldSizeValue:t.target.value})},n._handleSubmitSize=function(t){t.preventDefault(),n.props.onChangeSize(parseInt(n.state.fieldSizeValue,10))},n.state={fieldSizeValue:String(t.fieldSize)},n}return Object(_.a)(e,t),Object(c.a)(e,[{key:"_renderFieldSizeForm",value:function(){return a.a.createElement("form",{onSubmit:this._handleSubmitSize,className:P("form")},a.a.createElement("label",{className:P("label")},"\u0420\u0430\u0437\u043c\u0435\u0440 \u043f\u043e\u043b\u044f",a.a.createElement(V,{value:this.state.fieldSizeValue,onChange:this._handleChangeSize,type:"number",size:"small",min:2,max:100,step:1})),a.a.createElement(B,{size:"medium"},"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"))}},{key:"_renderHistoryCount",value:function(){return a.a.createElement("div",{className:P("count")},"\u0427\u0438\u0441\u043b\u043e \u0445\u043e\u0434\u043e\u0432: ",a.a.createElement("b",null,this.props.historyCount))}},{key:"render",value:function(){var t=this.props,e=t.historyCount,n=t.onMoveBack;return a.a.createElement("section",{className:P()},a.a.createElement(B,{disabled:0===e,onClick:n,size:"medium"},"\u0425\u043e\u0434 \u043d\u0430\u0437\u0430\u0434"),this._renderFieldSizeForm(),this._renderHistoryCount())}}]),e}(a.a.PureComponent),q=n(9),J=x()(m.a),K=function(t){function e(){return Object(s.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(_.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.props.onStartGame(4)}},{key:"componentDidUpdate",value:function(t){var e=this.props.field.position;e!==t.field.position&&function(t){for(var e=0;e<t.length-1;e++)if(e+1!==t[e])return!1;return!0}(e)&&this.props.onWin(),"win"===this.props.game.state&&"win"!==t.game.state&&alert("\u041f\u043e\u0431\u0435\u0434\u0438\u043b\u0438!!!")}},{key:"_renderControls",value:function(){var t=this.props,e=t.onMoveBack,n=t.onStartGame,i=t.field;return i.position.length?a.a.createElement(R,{onMoveBack:e,onChangeSize:n,fieldSize:Math.sqrt(i.position.length),historyCount:i.history.length}):null}},{key:"render",value:function(){return a.a.createElement("div",{className:J()},this._renderControls(),a.a.createElement("div",{className:J("field")},a.a.createElement(w,{field:this.props.field.position,onMove:this.props.onMove})))}}]),e}(a.a.Component),H=Object(d.b)(function(t){return t},function(t){return{onStartGame:function(e){t(Object(q.batchActions)([{type:"GAME_START"},O(e)]))},onMove:function(e){var n;t(Object(q.batchActions)([(n=e,{type:"FIELD_MOVE",target:n})]))},onMoveBack:function(){t(Object(q.batchActions)([{type:"FIELD_MOVE_BACK"}]))},onWin:function(){t(Object(q.batchActions)([{type:"GAME_WIN"}]))}}})(K),U=n(8),X=Object(U.combineReducers)({game:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.game;switch((arguments.length>1?arguments[1]:void 0).type){case"GAME_START":return{state:"in-progress"};case"GAME_WIN":return{state:"win"};case"GAME_FAIL":return{state:"fail"}}return t},field:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.field,e=arguments.length>1?arguments[1]:void 0,n=e.type,i=e.target,a=e.size;switch(n){case"FIELD_GENERATE":return{position:f(a),history:t.history};case"FIELD_MOVE":return{position:v(t.position,i),history:t.history.concat(i)};case"FIELD_MOVE_BACK":return{position:v(t.position,t.history[t.history.length-1]),history:t.history.slice(0,-1)}}return t}}),Z=n(28),$=Object(U.createStore)(Object(q.enableBatching)(X),Object(Z.composeWithDevTools)());Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(d.a,{store:$},a.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[29,1,2]]]);
//# sourceMappingURL=main.a7ea82a6.chunk.js.map